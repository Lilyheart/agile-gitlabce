<!DOCTYPE html>
<html>
  <head>
    <!-- Page Information -->
    <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agile Gitlab CE</title>
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <!-- Libraries -->
    <!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css">
    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Local -->
    <link rel="stylesheet" href="libraries/selectize.bootstrap3.css">
    <link rel="stylesheet" href="style/main.min.css" media="screen" title="no title" charset="utf-8">

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
  </head>

  <body>

    <div class="head" id="head">
      <header id="header" class="stripe">
        <div class="text-center">
          Created by
          <a href="https://github.com/Lilyheart/agile-gitlabce">
            Lily Romano</a>
        </div>
      </header>

      <!-- Title -->
      <h1>
        <a href="index.html">Agile Gitlab</a>
      </h1>

      <!-- Menu Bar -->
      <div id="stripe" class="stripe">
      </div>
    </div>
    <div id="container" class="container-fluid">
      <div class="row">
        <!-- Large screens 1/3 - 2/3, Small screens Stacked -->
        <div class="col-md-4 col-sm-12">
          <hr />
          <h3 class="pad-below">Gitlab Setup</h3>
          <div id="gitlab_auth">


            <ul class="nav nav-pills nav-justified mb-3" id="pills-tab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="gitlab_auth_oauth" data-toggle="pill" href="#pills-auth-oauth" role="tab" aria-controls="pills-auth-oauth" aria-selected="true">
                  OAuth
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="gitlab_auth_apikey" data-toggle="pill" href="#pills-auth-apikey" role="tab" aria-controls="pills-auth-apikey" aria-selected="false">
                  Api Key
                </a>
              </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
              <div class="tab-pane fade show active" id="pills-auth-oauth" role="tabpanel" aria-labelledby="gitlab_auth_oauth">
                <div id="">
                  <div class="form-group row">
                    <label for="auth-server-dropdown" class="col-sm-4 col-form-label">Gitlab Server:</label>
                    <div class="col-sm-8">
                      <select id="auth-server-dropdown" placeholder="Start typing name..." name="auth_server_id"   onchange="authenticate(this.options[this.selectedIndex].value)">
                      </select>
                    </div>
                  </div>
                  <div id="gitlab-login-link">
                    <button type="button" id="" class="btn btn-primary btn-lg btn-block d-flex align-items-center" onclick="openAuthPage()">
                      Login
                    </button>
                  </div>
                  <div id="gitlab-logout-link" style="display: none;">
                    <button type="button" id="" class="btn btn-primary btn-lg btn-block d-flex align-items-center" onclick="window.location.reload();">
                      Logout
                    </button>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="pills-auth-apikey" role="tabpanel" aria-labelledby="gitlab_auth_apikey">
                <div class="form-group row">
                  <label for="base_url" class="col-sm-4 col-form-label">Gitlab URL:</label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control" id="base_url" value="">
                  </div>
                </div>
                <div class="form-group row">
                  <label for="gitlab_key" class="col-sm-4 col-form-label">
                    <a href="#" class="nodec" data-toggle="tooltip" data-placement="top" title="This is obtained by creating an Access Token with api access from the settings page of your Gitlab profile.">
                      API Key: <i class="fa fa-info-circle"></i>
                    </a>
                  </label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control" id="gitlab_key" placeholder="API Key">
                  </div>
                </div>
                <button type="button" id="btnGetProjects" class="btn btn-primary btn-lg btn-block d-flex align-items-center" onclick="projects.getProjects('auto')">Get Projects</button>
              </div>
            </div>







            <hr />
          </div>

          <div id="loading_projects" class="m-5" style="display: none">
            <div class="d-flex justify-content-center">
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              &nbsp;&nbsp;Loading Projects...
            </div>
          </div>

          <div id="show_repo_options" class="row justify-content-end" style="display: none">
            <div class="col-8">
              <div class="form-check form-check-inline">
                <input class="form-check-input" name="filter" type="radio" id="radio1" value="my"  onclick="projects.getProjects('user')" checked>
                <label class="form-check-label" for="radio1">Show only repos I maintain</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" name="filter" type="radio" id="radio2" value="all" onclick="projects.getProjects('all')" >
                <label class="form-check-label" for="radio2">Show all repos</label>
              </div>
            </div>
          </div>

          <div id="gitlab_get_project" style="display: none">
            <div class="form-group row">
              <label for="project-dropdown" class="col-sm-4 col-form-label">Project ID:</label>
              <div class="col-sm-8">
                <select id="project-dropdown" placeholder="Start typing name..." name="project_id"  onchange="issues.enableIssueBtn()"></select>
              </div>
            </div>
            <button type="button" id="btnGetIssues" class="btn btn-primary btn-lg btn-block d-flex align-items-center" onclick="issues.getIssues()">
              Get Issues
            </button>
          </div>
        </div>

        <!-- Second Column -->

        <div class="col-md-8 col-sm-12">
          <hr />
					<ul class="nav nav-tabs" id="myTab" role="tablist">
					  <li class="nav-item">
					    <a class="nav-link disabled active" id="issues-tab" data-toggle="tab" href="#issuestab" role="tab" aria-controls="issuestab"
					      aria-selected="true">Gitlab Issues</a>
					  </li>
            <li class="nav-item">
              <a class="nav-link disabled" id="burndown-tab" data-toggle="tab" href="#burndowntab" role="tab" aria-controls="burndowntab"
                aria-selected="false">Burndown</a>
            </li>
					  <li class="nav-item">
					    <a class="nav-link disabled" id="members-tab" data-toggle="tab" href="#membertab" role="tab" aria-controls="membertab"
					      aria-selected="false">Active Members</a>
					  </li>
					  <li class="nav-item">
					    <a class="nav-link disabled" id="settings-tab" data-toggle="tab" href="#settingtab" role="tab" aria-controls="settingtab"
					      aria-selected="false">Settings</a>
					  </li>
					</ul>
					<div class="tab-content" id="myTabContent">
					  <div class="tab-pane fade show active" id="issuestab" role="tabpanel" aria-labelledby="issues-tab">
              <div id="loading_issues" style="display: none">
                <div class="d-flex justify-content-center m-5">
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    &nbsp;&nbsp;Loading Issues...
                </div>
              </div>
              <div id="gitlab_show_issues" style="display: none">
                <table id="issuestable" class="table table-dark table-hover" style="width:100%;"></table>
              </div>
            </div>
					  <div class="tab-pane fade" id="burndowntab" role="tabpanel" aria-labelledby="burndown-tab">
              <div id="loading_burndown" style="display: none">
                Loading Burndown...
                <div class="progress m-5">
                  <div id="burndown_progress" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
                </div>
              </div>
              <div id="burndown-unavailable" style="display: none">
                <p>
									Burndown charts are only available when logged in using an API Key.
								</p>
              </div>
              <div id="burndown" style="display: none">
                <div id="milestone-selection" class="form-group row">
                  <label for="milestone-dropdown" class="col-sm-3 col-form-label">Show Milestone:</label>
                  <div class="col-sm-9">
                    <select id="milestone-dropdown" class="drowndown custom-select" name="milestone_id" onchange="burndown.updateBurndownData(this.options[this.selectedIndex].value)">
                      <option selected="true" disabled>Load Projects first</option>
                    </select>
                  </div>
                </div>
                <div id="burndown-chart" style="height: 400px"></div>
                <hr />
                <div class="alert alert-dark alert-dismissible fade show" role="alert">
                  The following section is under development.
                  <ul>
                    <li>Hr Completed shows the actual total of time marked as spent by each user.</li>
                    <li>Hr Assigned is not current determined.
                  </ul>
                  If spent hours are assigned to the incorrect person, this can be fixed.  Please contact Lily Romano for more information.
                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div id="show_hours" style="display: none">
                  <table id="hourstable" class="table table-dark table-hover" style="width:100%;"></table>
                  <p>
                    * Hours completed only represents hours worked specifically on issues.
                    This does not include time spent on the project outside of those issues.
                    Time not included in this table include tasks such as writing up reports, meeting with clients, etc.
                  </p>
                </div>
              </div>
            </div>
					  <div class="tab-pane fade" id="membertab" role="tabpanel" aria-labelledby="members-tab">
              TODO Later
            </div>
					  <div class="tab-pane fade" id="settingtab" role="tabpanel" aria-labelledby="settings-tab">
              TODO Later Later
            </div>
					</div>
        </div>
      </div> <!-- end class="row" -->
    </div>

    <!-- Script Libraries -->
    <span>
			<!-- highcharts -->
			<script src="https://code.highcharts.com/highcharts.js"></script>
      <script src="https://code.highcharts.com/modules/exporting.js"></script>
      <script src="https://code.highcharts.com/modules/annotations.js"></script>
      <!-- Popper -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
      <!-- DataTables -->
      <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
      <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
      <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
      <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>
      <!-- Bootstrap -->
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
      <!-- Local -->
      <script type="text/javascript" src="libraries/selectize.min.js"></script>
      <script type="text/javascript" src="libraries/defiant.min.js"></script>
      <script type="text/javascript" src="scripts/projects.js"></script>
      <script type="text/javascript" src="scripts/issues.js"></script>
      <script type="text/javascript" src="scripts/burndown.js"></script>
      <script type="text/javascript" src="scripts/hours.js"></script>
      <script type="text/javascript" src="gitlab_servers.js"></script>
      <script type="text/javascript" src="scripts/main.js"></script>
    </span>
  </body>
</html>
